# ğŸ”RootFreeFireWall
`Android`å…å…å…å…å…å…å…`root`é˜²ç«å¢™ï¼Œå¯ä»¥ç›‘æ§ã€æ‹¦æˆªåº”ç”¨æµé‡ï¼Œè¿˜èƒ½æ‹¦æˆªåƒåœ¾çŸ­ä¿¡

---

# ğŸ’¥åŸç†
## åº”ç”¨æµé‡æ‹¦æˆª
æƒ³è¦å®ç°`Android`ç³»ç»Ÿä¸Šçš„é˜²ç«å¢™ï¼Œä¸€èˆ¬æœ‰ä¸¤ç§æ€è·¯ï¼š
* `root`ä¹‹åä½¿ç”¨ä¸€äº›`linux`å†…æ ¸çº§åˆ«çš„åº“å‡½æ•°å®ç°åŒ…æ‹¦æˆªã€è¿‡æ»¤ç­‰
* å…`root`æƒ…å†µä¸‹ä½¿ç”¨`VpnService`å¯ä»¥è·å–ç‰©ç†ç½‘å¡è¦å‘å‡ºå»çš„åŒ…ï¼Œè¿›è€Œå®ç°åŒ…æ‹¦æˆªã€è¿‡æ»¤

åœ¨`Android`ç³»ç»Ÿä¸­ï¼Œåº”ç”¨å¾€å¾€éƒ½æ˜¯ä½¿ç”¨`http`åè®®è¿›è¡Œæ•°æ®çš„æ”¶å‘ï¼Œå¦å¤–ï¼Œåœ¨`Android`ç³»ç»Ÿä¸­ï¼Œå¾€å¾€ä¹Ÿä¸ç”¨è€ƒè™‘å…¥ç«™æ•°æ®ï¼Œå› ä¸ºç³»ç»Ÿä¸­ä¸å¯èƒ½éƒ¨ç½²ä¸€ä¸ªæœåŠ¡å™¨åº”ç”¨ã€‚ç”±äºè¿™æ ·çš„ç‰¹æ®Šæ€§ï¼Œ`Android`ç³»ç»Ÿä¸­å¾€å¾€ä¸ä¼šé’ˆå¯¹å¥—æ¥å­—å•å…ƒè®¾ç½®é˜²ç«å¢™è§„åˆ™ï¼Œè€Œæ˜¯ç®€å•åœ°è®¾ç½®åº”ç”¨çº§åˆ«çš„é˜²ç«å¢™è§„åˆ™ã€‚

è¿™é‡Œè¯´ä¸€ä¸‹`VpnService`çš„åŸç†ï¼Œ`VpnService`æ˜¯ä¸€ä¸ª`Android`åæœŸç‰ˆæœ¬æä¾›çš„`API`ï¼Œä»–æ˜¯ä¸€ä¸ªç»§æ‰¿äº`Service`çš„æœåŠ¡ï¼Œå½“ç”¨æˆ·å®ç°ä¸€ä¸ªç»§æ‰¿è‡ª`VpnService`çš„æœåŠ¡ç±»æ—¶ï¼Œå¯ä»¥å»ºç«‹`Vpn`è¿æ¥ï¼Œä¹Ÿå°±æ˜¯ç³»ç»Ÿè®¾ç½®ä¸­çš„`VPN`ä¸€æ é‡Œçš„è®¾ç½®ã€‚

å½“å»ºç«‹`Vpn`è¿æ¥ä¹‹åï¼Œå¯ä»¥è·å–åˆ°ä¸€ä¸ªç‰©ç†ç½‘å¡çš„æ–‡ä»¶æè¿°ç¬¦ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨è¿™ä¸ªæ–‡ä»¶æè¿°ç¬¦å»ºç«‹`IO`é€šé“ï¼Œæ¯ä¸€æ¬¡å¯¹è¿™ä¸ªé€šé“è°ƒç”¨`read()`ï¼Œå¯ä»¥è·å–åˆ°ä¸€ä¸ªæœ¬æ¥å°†è¦ä»ç‰©ç†ç½‘å¡å‘é€åˆ°å¤–éƒ¨ç½‘ç»œçš„`IP`æ•°æ®åŒ…ï¼Œæ¯ä¸€æ¬¡å¯¹è¿™ä¸ªé€šé“è°ƒç”¨`write()`ï¼Œå¯ä»¥å†™å…¥ä¸€ä¸ªæœ¬æ¥å°†è¦ä»å¤–éƒ¨ç½‘ç»œå†™å…¥ç‰©ç†ç½‘å¡çš„æ•°æ®åŒ…ã€‚è¿™ä¸€æ“ä½œæ˜¯ç”±`VpnService`è™šæ‹Ÿå‡ºæ¥ä¸€å¼ è™šæ‹Ÿç½‘å¡å®ç°çš„ï¼Œæ•´ä½“æ¥çœ‹å°±æ˜¯è¿™æ ·ä¸€å¼ å›¾ï¼š

```
    phy     ->    tun0   ->    network
   ç‰©ç†ç½‘å¡  <-   è™šæ‹Ÿç½‘å¡  <-    å¤–éƒ¨ç½‘ç»œ
```

å®é™…ä¸Šï¼Œæˆ‘ä»¬æ‹¿åˆ°æ•°æ®åŒ…ä¹‹åï¼Œè¦æŠŠæ•°æ®åŒ…æ‹†äº†ï¼Œç„¶åé‡æ–°å°è£…ï¼Œå†ä»¥`tun0`çš„èº«ä»½å‘é€ç»™`network`ï¼Œç„¶åæ”¶åˆ°`network`å›åº”çš„åŒ…ä¹‹åï¼Œä¹Ÿè¦æ‹†äº†ï¼Œç„¶åé‡æ–°å°è£…ï¼Œå‡è£…åŒ…æ˜¯ç›´æ¥ä»`network`å‘ç»™`phy`çš„ï¼Œæœ€åå†æŠŠé‚£ä¸ªåŒ…å†™å›`phy`ã€‚è¿™å°±æ˜¯æ•´ä¸ªæµç¨‹ï¼Œ`IP`åŒ…æ˜¯æ— è¿æ¥çš„ï¼Œä½†æ˜¯è€ƒè™‘åˆ°ä¸Šå±‚æœ‰ä¸€äº›åè®®æ˜¯é¢å‘è¿æ¥çš„ï¼Œæ¯”å¦‚`TCP`ï¼Œæˆ‘ä»¬åœ¨`tun0`ä¸`network`ä¹‹é—´çš„é€šä¿¡ï¼Œè¿˜è¦æ‰‹åŠ¨å®ç°ä¸‰æ¬¡æ¡æ‰‹ã€å››æ¬¡æŒ¥æ‰‹ã€è¿æ¥ç®¡ç†ç­‰ã€‚è¿™å°±ç›¸å½“äºè¦å®ç°ä¸€ä¸ªç®€åŒ–ç‰ˆçš„`TCP/IP`æŠ€æœ¯æ ˆã€‚

æœ€åçš„æ•ˆæœå°±æ˜¯`phy`å’Œ`network`ç›¸äº’ä»¥ä¸ºè‡ªå·±å†ä¸å¯¹æ–¹é€šä¿¡ï¼Œä½†å®é™…ä¸Šæ˜¯`phy`ä¸`tun0`é€šä¿¡ã€`network`ä¹Ÿä¸`tun0`é€šä¿¡ã€‚è¿™æ ·ä¸€ç§æ€æƒ³å¾€å¾€ç”¨äºæ­å»º`Vpn`ï¼Œä½†æ˜¯ï¼Œæˆ‘ä»¬åªè¦åœ¨`phy`åˆ°`tun0`çš„é“¾è·¯ä¸Šåšæ‰‹è„šï¼Œå°±èƒ½æ–­å¼€ä»–ä¸å¤–éƒ¨çš„è¿æ¥ï¼Œå¦å¤–ï¼Œå¦‚æœåœ¨æ•´æ¡é€šä¿¡é“¾è·¯ä¸Šäºˆä»¥æ—¥å¿—è®°å½•ï¼Œå°±èƒ½å®ç°ç›‘æ§çš„ç›®çš„ã€‚è¿™å°±æ˜¯åº”ç”¨æµé‡æ‹¦æˆªçš„æ€æƒ³ã€‚

## åƒåœ¾çŸ­ä¿¡æ‹¦æˆª
`todo`

# TODO!!!
